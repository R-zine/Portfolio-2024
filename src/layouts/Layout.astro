---
import { ViewTransitions } from "astro:transitions";

import InfoButton from "../components/InfoButton.astro";
import MenuItem from "../components/MenuItem.astro";

interface Props {
  title: string;
}

const { title } = Astro.props;

const route = Astro.url.pathname;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Ivan Radev - Personal developer portfolio. Built on Astro with React, Angular, Vue and Svelte."
    />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/logo.png" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <script>
      import "htmx.org";
    </script>
    <ViewTransitions />
    <link rel="stylesheet" href="./angular/styles-5INURTSO.css" />
  </head>
  <body>
    <header>
      <h2>Ivan Radev</h2>
      <h3>Developer Portfolio</h3>
    </header>
    <nav>
      <ul style="margin: 0 !important;">
        <MenuItem title="Home" isActive={route === "/"} route="/" />
        <MenuItem
          title="Projects"
          isActive={route === "/projects"}
          route="/projects"
        />
        <MenuItem title="Stack" isActive={route === "/stack"} route="/stack" />
        <MenuItem
          title="Contact"
          isActive={route === `/contact` || route === "/contact/"}
          route=`/contact`
        />
      </ul>
    </nav>

    <a
      class="mobile-menu-btn button"
      hx-get=`/show-menu?page=${route}`
      hx-target="#mobile-menu"
      hx-swap="innerHTML"
      data-astro-prefetch
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="16"
        width="14"
        viewBox="0 0 448 512"
      >
        <path
          d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"
        ></path></svg
      >
    </a>

    <div id="mobile-menu"></div>

    <main>
      <div id="lightring">
        <slot />
      </div>
    </main>
    <div id="info-cont" style={`--pos: ${route === "/stack" ? "0" : "50%"}`}>
    </div>
    <InfoButton route={route} />
    <div class="spinner">
      <div></div>
    </div>

    <style is:global>
      @import url("https://fonts.googleapis.com/css2?family=Poiret+One&display=swap");

      html {
        font-family: "Poiret One", sans-serif;
        background: black;

        cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 512 512'%3E%3C!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --%3E%3Cpath fill='%23BBB' d='M222.7 32.15C227.7 49.08 218.1 66.9 201.1 71.94C121.8 95.55 64 169.1 64 255.1C64 362 149.1 447.1 256 447.1C362 447.1 448 362 448 255.1C448 169.1 390.2 95.55 310.9 71.94C293.9 66.9 284.3 49.08 289.3 32.15C294.4 15.21 312.2 5.562 329.1 10.6C434.9 42.07 512 139.1 512 255.1C512 397.4 397.4 511.1 256 511.1C114.6 511.1 0 397.4 0 255.1C0 139.1 77.15 42.07 182.9 10.6C199.8 5.562 217.6 15.21 222.7 32.15V32.15z'/%3E%3C/svg%3E"),
          default;
      }

      body {
        color: white;
        margin: 0;
      }

      .button:hover {
        cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 512 512'%3E%3C!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --%3E%3Cpath fill='%23BBB' d='M222.7 32.15C227.7 49.08 218.1 66.9 201.1 71.94C121.8 95.55 64 169.1 64 255.1C64 362 149.1 447.1 256 447.1C362 447.1 448 362 448 255.1C448 169.1 390.2 95.55 310.9 71.94C293.9 66.9 284.3 49.08 289.3 32.15C294.4 15.21 312.2 5.562 329.1 10.6C434.9 42.07 512 139.1 512 255.1C512 397.4 397.4 511.1 256 511.1C114.6 511.1 0 397.4 0 255.1C0 139.1 77.15 42.07 182.9 10.6C199.8 5.562 217.6 15.21 222.7 32.15V32.15z'/%3E%3C/svg%3E"),
          default;
      }

      a {
        text-decoration: none;
      }

      header {
        display: flex;
        flex-direction: column;
        align-items: start;
        position: fixed;
        top: calc(94vh - 2vmax);
        left: 0;
        margin: 40px;
        & > * {
          margin: 0;
        }
        h2 {
          font-size: 1vmax;
        }
        h3 {
          font-size: 0.7vmax;
        }
      }

      ul {
        display: flex;
        flex-direction: column;
        gap: 12px;
        position: fixed;
        top: calc(6vh - 1vmax);
        left: 0;
        margin: 0 !important;
      }

      .info-btn {
        position: fixed;
        left: 0;
        top: 49vh;
      }

      #info-cont,
      .spinner {
        margin: 0;
        padding: 0;
        width: 150vh;
        min-height: 150vh;
        border-radius: 50%;
        color: white;
        font-size: 16px;
        border: 2px solid white;
        display: flex;
        align-items: center;

        position: fixed;
        top: -22.5vh;
        left: 21vw;
        pointer-events: none;

        & > div {
          position: absolute;
          width: 90%;
          height: 90%;
          border: 2px solid grey;
          border-radius: 50%;
          margin-left: 5%;
          background-color: black;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
        }
      }

      main {
        margin: 0;
        padding: 0;
        width: 150vh;
        min-height: 150vh;
        border-radius: 50%;
        color: white;
        font-size: 16px;
        border: 2px solid white;
        display: flex;
        align-items: center;

        position: fixed;
        top: -22.5vh;
        left: 21vw;

        box-shadow: 0px 0px 25px white;
        overflow: hidden;

        background-image: url("../148.jpg");
        object-fit: scale-down;

        animation-name: change;
        animation-duration: 20s;
        animation-iteration-count: infinite;
        animation-play-state: running;
        animation-timing-function: cubic-bezier(0.895, 0.03, 0.685, 0.22);

        & > div {
          position: absolute;
          width: 90%;
          height: 90%;
          border: 2px solid grey;
          border-radius: 50%;
          margin-left: 5%;
          background-color: black;
          display: flex;
          align-items: center;
          justify-content: center;

          overflow: hidden;

          transition: 500ms ease-in;

          box-shadow:
            0 0 25px black,
            0 0 5px white,
            0 0 10px white;
        }
      }

      .lightring {
        box-shadow:
          0 0 25px black,
          0 0 5px white,
          0 0 10px white,
          0 0 25px inset white,
          0 0 45px inset white;

        & > .content {
          transition: 0.5s;
        }
      }

      .info-box-btn {
        width: 60px;
        height: 60px;
        border: 1px solid white;
        border-radius: 50%;
        align-self: center;
        margin-top: 20%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition:
          box-shadow 400ms,
          color 1400ms,
          background-color 1200ms;

        &:hover {
          color: black;
          box-shadow:
            0 0 15px inset white,
            0 0 15px white,
            0 0 30px white;
          background-color: white;

          & > svg {
            filter: invert(0);
          }
        }

        & > svg {
          transition: 1.2s;
          filter: invert(100%);
          transform: scale(1.4);
        }
      }

      #info-cont:has(.info-shown) + a {
        color: black;
        box-shadow:
          0 0 15px inset white,
          0 0 15px white,
          0 0 30px white;
        background-color: white;
        pointer-events: none;
      }

      .spinner {
        justify-content: center;
        & > div {
          height: 2vw !important;
          width: 2vw !important;
          border: 3px solid white;
          border-radius: 50%;
          z-index: 2001;
          box-shadow: 0 0 5px 1px white;
          animation: pulse 1.5s infinite;
          margin-left: 0 !important;
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        18% {
        }
        65% {
          transform: scale(1.05);
          box-shadow: 0 0 10px 0px white;
        }
        76% {
          transform: scale(0.97);
          box-shadow: 0 0 5px 0px white;
        }
        86% {
          transform: scale(1.05);
          box-shadow: 0 0 10px 1px white;
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes change {
        0% {
          background-image: url("../148.jpg");
        }
        15% {
          background-image: url("../186.jpg");
        }
        25% {
          background-image: url("../199.jpg");
        }
        45% {
          background-image: url("../223.jpg");
        }
        60% {
          background-image: url("../259.jpg");
        }
        78% {
          background-image: url("../287.jpg");
        }
        90% {
          background-image: url("../089.jpg");
        }
      }

      .mobile-menu-btn {
        position: fixed;
        top: 4px;
        left: 4px;
        padding: 1.6rem;
        width: 0.3vh;
        height: 0.3vh;
        display: none;
        justify-content: center;
        align-items: center;
        border: 1px solid white;
        border-radius: 50%;
        font-size: 1.2rem;

        & > svg {
          filter: invert(100%);
          transform: scale(6) !important;
        }
      }

      #mobile-menu {
        position: fixed;
        top: 0;
        left: 0;
        min-width: 100vw;
        min-height: 100vh;
        background-color: black;
        z-index: 5000;
        display: none;

        .menu-close-btn > svg {
          transform: scale(6) !important;
        }
      }

      #mobile-menu:has(.menu-shown) {
        display: block;
      }

      app-root {
        min-width: 100%;
        min-height: 100%;
        z-index: 3000;
        display: flex;
        align-items: center;
        justify-content: center;

        & > .content {
          min-width: 100%;
          min-height: 100%;
        }
      }

      @media only screen and (max-width: 1700px) {
        header,
        nav {
          display: none !important;
        }

        main,
        #info-cont,
        .spinner {
          left: calc(50vw - 75vh);
          transform: scale(65%);
        }

        canvas {
          width: 100% !important;
          height: 100% !important;
        }

        .body {
          padding-left: 30% !important;
          padding-right: 30% !important;
        }

        .links {
          justify-content: center !important;
          gap: 10px;
        }

        .grid {
          transform: scale(0.9);
        }

        .eye {
          color: #00000000 !important;
        }

        .content {
          flex-direction: column-reverse;
          gap: 10vh !important;

          & > div {
            display: none;
          }

          input,
          textarea {
            width: 280px !important;
          }

          & > section {
            flex-direction: row !important;
          }
        }

        .info-btn {
          top: 4px !important;
          left: calc(100vw - 3.2rem - 8px) !important;
        }

        #info-cont:has(.info-shown) + a {
          & > div > svg {
            filter: invert(0) !important;
          }
        }

        .mobile-menu-btn {
          display: flex;
        }
      }
    </style>
  </body>
</html>
